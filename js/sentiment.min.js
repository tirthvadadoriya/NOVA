function analyzeSentiment(text) {
  // A very basic sentiment lexicon. In a real application, this would be much larger.
  const sentimentLexicon = {
    "good": 1, "great": 2, "excellent": 2, "awesome": 2, "fantastic": 2,
    "happy": 1, "love": 1, "like": 1, "positive": 1, "wonderful": 2,
    "bad": -1, "poor": -1, "terrible": -2, "awful": -2, "horrible": -2,
    "sad": -1, "hate": -1, "dislike": -1, "negative": -1, "worst": -2,
    "not": -0.5, // Simple negation handling
    "very": 0.5, // Intensifier
    "extremely": 0.7, // Intensifier
  };

  // Clean and tokenize the text
  // Convert to lowercase, remove punctuation, and split into words
  const words = text.toLowerCase()
                    .replace(/[.,!?;:"']/g, '') // Remove common punctuation
                    .split(/\s+/); // Split by one or more spaces

  let score = 0;
  let previousWord = '';

  for (let i = 0; i < words.length; i++) {
    const word = words[i];
    let wordScore = sentimentLexicon[word] || 0;

    // Simple negation and intensifier handling
    if (previousWord === 'not') {
      wordScore *= -1; // Invert the sentiment of the next word
    } else if (previousWord === 'very' || previousWord === 'extremely') {
      wordScore *= 1.5; // Increase the impact of the next word
    }
    
    score += wordScore;
    previousWord = word;
  }

  let sentiment = "neutral";
  if (score > 0) {
    sentiment = "positive";
  } else if (score < 0) {
    sentiment = "negative";
  }

  return {
    score: score,
    sentiment: sentiment,
    wordsAnalyzed: words.length
  };
}